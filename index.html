<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂∏‡∑í‡∂≠‡∑î‡∂ª‡∑è</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Noto Sans Sinhala', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #e0f7fa;
    overflow-x: hidden;
}
header {
    background: #0077b7;
    color: white;
    padding: 1rem;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}
nav {
    display: flex;
    justify-content: center;
    background: #023e8a;
    flex-wrap: wrap;
}
nav a {
    color: white;
    text-decoration: none;
    padding: 1rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
    transition: transform 0.2s;
}
nav a:hover {
    background: #0096c7;
    transform: scale(1.1);
}
section { padding: 2rem; }
h1, h2 { color: #023e8a; }

.letters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
    gap: 10px;
    margin-top: 1rem;
}
.letter {
    font-size: 2rem;
    text-align: center;
    background: #fff;
    border: 2px solid #0096c7;
    border-radius: 10px;
    padding: 10px;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
}
.letter:hover { background: #caf0f8; transform: scale(1.2); }

.game, .faq, .howto, .feedback {
    background: #fff;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 15px;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}
footer {
    background: #023e8a;
    color: white;
    text-align: center;
    padding: 1rem;
    margin-top: 2rem;
}
input, textarea {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
    border: 1px solid #0096c7;
    border-radius: 6px;
    font-family: inherit;
}
button {
    background: #0077b6;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.2s;
}
button:hover { background: #0096c7; transform: scale(1.05); }

.game-dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}
.game-card {
    background: linear-gradient(135deg, #f9f9f9, #e0f7fa);
    border-radius: 15px;
    padding: 1rem;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
}
.game-card:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
}

canvas {
    border: 1px solid #0096c7;
    border-radius: 8px;
    margin-top: 1rem;
    width: 100%;
    max-width: 400px;
    background-color: white;
}

.motivation { color: green; font-weight: bold; margin-top: 5px; }
.trace-controls {
    display: flex; justify-content: center; gap: 10px; margin-top: 10px;
}
.bad { color: #c1121f; font-weight: bold; }
.info { color: #023e8a; font-weight: bold; }
.grid-mini {
    display: grid;
    grid-template-columns: repeat(6, minmax(36px, 1fr));
    gap: 6px;
    justify-items: center;
}
.tile {
    background: #0096c7; color:#fff; border-radius: 8px;
    padding: 10px; cursor: pointer; user-select: none;
}
.tile.correct { background:#2a9d8f; }
.tile.wrong { background:#e76f51; }
.stats { margin-top: .5rem; font-weight: 700; }
</style>
</head>
<body>

<!-- Sounds (optional) -->
<audio id="successSound" src="sounds/success.mp3"></audio>

<header>
    <h1>‚úçÔ∏è ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂∏‡∑í‡∂≠‡∑î‡∂ª‡∑è</h1>
    <p>‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î, ‡∑Ä‡∂†‡∂± ‡∑É‡∑Ñ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è</p>
</header>

<nav>
    <a href="#home">üè† ‡∂∏‡∑î‡∂Ω‡∑ä ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä</a>
    <a href="#activities">üî° ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂ö‡∑è‡∂ª‡∂ö‡∂∏‡∑ä</a>
    <a href="#games">üéÆ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è</a>
    <a href="#howto">üìñ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂Ö‡∂∫‡∑î‡∂ª‡∑î</a>
    <a href="#faq">‚ùì ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±</a>
    <a href="#feedback">üìù ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä</a>
    <a href="#contact">üìû ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∑ì‡∂∏</a>
</nav>

<section id="home">
    <h2>‡∂∏‡∑î‡∂Ω‡∑ä ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä</h2>
    <p><b>‡∂Ö‡∂ª‡∂∏‡∑î‡∂´:</b> "‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂∏‡∑í‡∂≠‡∑î‡∂ª‡∑è" ‡∂∫‡∂±‡∑î <b>‡∂©‡∑í‡∑É‡∑ä‡∂ú‡∑ä‚Äç‡∂ª‡∑è‡∑Ü‡∑í‡∂∫‡∑è</b> ‡∂á‡∂≠‡∑í ‡∑É‡∑í‡∑É‡∑î‡∂±‡∑ä‡∂ß ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä‡∑ô‡∂±‡∑ä ‡∂Ω‡∑í‡∑Ä‡∑ì‡∂∏ ‡∑É‡∑Ñ ‡∂ö‡∑í‡∂∫‡∑Ä‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂¥‡∑Ñ‡∑É‡∑î‡∑Ä ‡∑É‡∂¥‡∂∫‡∂± ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫‡∂ö‡∑í.</p>
</section>

<!-- ACTIVITIES -->
<section id="activities">
    <h2>üî° ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±</h2>
    <p>‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂¥‡∂≠‡∑ä ‡∂ö‡∑Ö ‡∂Ö‡∂ö‡∑î‡∂ª ‡∑É‡∑ú‡∂∫‡∑è grid ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>
    <h3>‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±: <span id="targetLetter" style="font-size:2rem;color:#d62828;"></span></h3>
    <div class="letters" id="lettersGrid"></div>
    <p id="activityMsg" class="motivation"></p>
    <p class="stats"><b>‡∂Ö‡∂ª‡∂∫‡∑î:</b> <span id="findScore">0</span> / <span id="findTotal">0</span> |
       <b>‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑è‡∂∞‡∂±‡∂∫:</b> <span id="findAccuracy">0%</span></p>
    <button onclick="newTarget()">‡∂±‡∑Ä ‡∂Ö‡∂ö‡∑î‡∂ª‡∂ö‡∑ä</button>
</section>

<!-- GAMES -->
<section id="games">
    <h2>üéÆ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è ‡∂¥‡∑î‡∑Ä‡∂ª‡∑î‡∑Ä</h2>
    <div class="game-dashboard">

        <!-- Tracing (fixed) -->
        <div class="game-card">
            <h3>‚úçÔ∏è ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ö‡∂≥‡∑í‡∂± ‡∂Ö‡∂∑‡∑í‡∂∫‡∑ù‡∂ú‡∂∫</h3>
            <p>‡∂Ö‡∂≥‡∑í‡∂± ‡∑Ä‡∑í‡∂ß ‡∂ª‡∑Ä‡∑î‡∂∏‡∑ä ‡∂Ö‡∑Ö‡∑î outline ‡∂ë‡∂ö‡∂ß ‡∑É‡∂∏‡∑ì‡∂¥‡∑Ä ‡∂Ö‡∂≥‡∑í‡∂∫‡∑í. (‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂≠‡∑è‡∑Ä %)</p>
            <canvas id="traceCanvas" width="240" height="240"></canvas>
            <div class="trace-controls">
                <button onclick="startTracing()">‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑</button>
                <button onclick="clearTracing()">‡∂∏‡∂ö‡∂±‡∑ä‡∂±</button>
                <button onclick="nextTracing()">‡∂ä‡∑Ö‡∂ü</button>
            </div>
            <p class="info">‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂≠‡∑è‡∑Ä: <span id="traceAccuracy">0</span>%</p>
            <p class="motivation" id="traceMotivation"></p>
        </div>

        <!-- Memory Match -->
        <div class="game-card">
            <h3>üß† ‡∂∏‡∂≠‡∂ö ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä</h3>
            <p>‡∂ë‡∂ö‡∂∏ ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ø‡∑ô‡∂ö‡∂ö‡∑ä ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑ö ‡∂±‡∂∏‡∑ä ‡∑É‡∂∏‡∑è‡∂±‡∂∫‡∑í.</p>
            <div id="memoryGame"></div>
            <button onclick="initMemoryGame()">‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
            <p class="motivation" id="memoryMotivation"></p>
            <p>‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂Ö‡∂±‡∑î‡∂¥‡∑í‡∑Ö‡∑í‡∑Ä‡∑ô‡∂Ω: <span id="memoryAccuracy">0</span>%</p>
        </div>

        <!-- Vowel / Consonant Sort -->
        <div class="game-card">
            <h3>üÖ∞Ô∏è ‡∑É‡∑ä‡∑Ä‡∂ª / ‡∑Ä‡∑ä‚Äç‡∂∫‡∂Ç‡∂¢‡∂± ‡∑Ä‡∂ª‡∑ä‡∂ú‡∑ì‡∂ö‡∂ª‡∂´‡∂∫</h3>
            <p>‡∂ë‡∂±‡∑ä‡∂±‡∂∏‡∑ä ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂≠‡∑î‡∑Ö‡∑í‡∂±‡∑ä <b>‡∑É‡∑ä‡∑Ä‡∂ª</b> ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±.</p>
            <div id="vcGrid" class="grid-mini"></div>
            <div class="trace-controls">
                <button onclick="newVCRound()">‡∂±‡∑Ä ‡∑Ä‡∂ß‡∂∫‡∂ö‡∑ä</button>
                <button onclick="revealVC()">‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±</button>
            </div>
            <p class="stats">‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í: <span id="vcCorrect">0</span> / <span id="vcTotal">0</span> |
                ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑è‡∂∞‡∂±‡∂∫: <span id="vcAcc">0%</span></p>
            <p id="vcMsg" class="motivation"></p>
        </div>

        <!-- Speed Tap -->
        <div class="game-card">
            <h3>‚ö° ‡∂ö‡∂©‡∑í‡∂±‡∂∏‡∑ä ‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä</h3>
            <p>‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±: <span id="tapTarget" style="font-size:1.6rem;color:#d62828"></span></p>
            <div id="tapGrid" class="grid-mini"></div>
            <div class="trace-controls">
                <button onclick="startTap()">‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑</button>
                <span>‚è±Ô∏è <span id="tapTimer">20</span>s</span>
            </div>
            <p class="stats">‡∂Ω‡∂ö‡∑î‡∂´‡∑î: <span id="tapScore">0</span> | ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ: <span id="tapAttempts">0</span> |
               ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑è‡∂∞‡∂±‡∂∫: <span id="tapAcc">0%</span></p>
            <p id="tapMsg" class="motivation"></p>
        </div>

    </div>
</section>

<!-- HOW TO -->
<section id="howto" class="howto">
    <h2>üìñ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂Ö‡∂∫‡∑î‡∂ª‡∑î</h2>
    <ol>
        <li>üî° <b>‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±</b> ‚Üí ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂± ‡∂Ö‡∂ö‡∑î‡∂ª grid ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∑É‡∑ú‡∂∫‡∑è ‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∑É‡∑Ñ % ‡∂Ø‡∂ª‡∑ä‡∑Å‡∂±‡∂∫ ‡∑Ä‡∑ö.</li>
        <li>‚úçÔ∏è <b>‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ö‡∂≥‡∑í‡∂± ‡∂Ö‡∂∑‡∑í‡∂∫‡∑ù‡∂ú‡∂∫</b> ‚Üí ‡∂≠‡∑í‡∂ª‡∂∫‡∑ö ‡∂Ö‡∑Ö‡∑î outline ‡∂∏‡∂≠ ‡∂Ö‡∂≥‡∑í‡∂± ‡∑Ä‡∑í‡∂ß ‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂≠‡∑è‡∑Ä % ‡∑Ä‡∑ê‡∂©‡∑ö. 80% ‡∂â‡∂ö‡∑ä‡∂∏‡∑Ä‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì üëè.</li>
        <li>üß† <b>‡∂∏‡∂≠‡∂ö ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä</b> ‚Üí ‡∑É‡∂∏‡∑è‡∂± ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂∫‡∑î‡∂ú‡∂Ω ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂±‡∑ä‡∂±.</li>
        <li>üÖ∞Ô∏è <b>‡∑É‡∑ä‡∑Ä‡∂ª/‡∑Ä‡∑ä‚Äç‡∂∫‡∂Ç‡∂¢‡∂±</b> ‚Üí ‡∂Ø‡∂ª‡∑ä‡∑Å‡∂±‡∂ú‡∂≠ 12 ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ö‡∂≠‡∂ª‡∑í‡∂±‡∑ä ‡∑É‡∑ä‡∑Ä‡∂ª ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±.</li>
        <li>‚ö° <b>‡∂ö‡∂©‡∑í‡∂±‡∂∏‡∑ä ‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä</b> ‚Üí 20s ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠ ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö ‡∂Ö‡∂ö‡∑î‡∂ª‡∂ö‡∑ä ‡∑Ä‡∑ö‡∂ú‡∂∫‡∑ô‡∂±‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±.</li>
    </ol>
</section>

<!-- FAQ -->
<section id="faq" class="faq">
    <h2>‚ùì ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±</h2>
    <p><b>‡∂∏‡∂ú‡∑ö ‡∂Ø‡∂ª‡∑î‡∑Ä‡∑è‡∂ß ‡∂∏‡∑ö ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫‡∑ô‡∂±‡∑ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂≠ ‡∑Ñ‡∑ê‡∂ö?</b> ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∑Ñ‡∂≥‡∑î‡∂±‡∑è‡∂ú‡∑ê‡∂±‡∑ì‡∂∏, ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ö‡∂≥‡∑í‡∂± ‡∂Ö‡∂∑‡∑ä‚Äç‡∂∫‡∑è‡∑É, ‡∂∏‡∂≠‡∂ö ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è, ‡∑Ñ‡∑è ‡∑Ä‡∂ª‡∑ä‡∂ú‡∑ì‡∂ö‡∂ª‡∂´/‡∑Ä‡∑ö‡∂ú ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è.</p>
    <p><b>‡∂∏‡∑ô‡∂∏ ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂Ö‡∂∏‡∂≠‡∂ª ‡∂∏‡∑ò‡∂Ø‡∑î‡∂ö‡∑è‡∂Ç‡∂ú ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫‡∂Ø?</b> ‡∂±‡∑ê‡∑Ñ‡∑ê, ‡∂î‡∂∂‡∑ö Browser ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä‡∂∏ ‡∂∏‡∑ö ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö.</p>
    <p><b>‡∂∏‡∑ô‡∂∏ ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫ ‡∂∏‡∑ú‡∂±‡∑Ä‡∂Ø ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∂ª‡∂± ‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂ß?</b> ‡∑Ä‡∑í‡∑Å‡∑ö‡∑Ç‡∂∫‡∑ô‡∂±‡∑ä‡∂∏ <b>‡∂©‡∑í‡∑É‡∑ä‡∂ú‡∑ä‚Äç‡∂ª‡∑è‡∑Ü‡∑í‡∂∫‡∑è</b> ‡∑É‡∑Ñ ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ω‡∑í‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂Ö‡∂¥‡∑Ñ‡∑É‡∑î‡∂≠‡∑è ‡∂á‡∂≠‡∑í ‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂ß, ‡∂±‡∂∏‡∑î‡∂≠‡∑ä ‡∂ï‡∂±‡∑ë‡∂∏ ‡∑Ö‡∂∏‡∑î‡∂±‡∑ä‡∂ß ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∑Ñ‡∂≥‡∑î‡∂±‡∑è‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∑ö ‡∑É‡∑Ñ ‡∂∏‡∂≠‡∂ö ‡∂¥‡∑î‡∑Ñ‡∑î‡∂´‡∑î‡∑Ä‡∑ö ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∑Ä‡∑ö.</p>
</section>

<!-- FEEDBACK -->
<section id="feedback" class="feedback">
    <h2>üìù ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä</h2>
    <form id="feedbackForm">
        <label>‡∂±‡∂∏:</label><input type="text" id="name" required>
        <label>‡∂ä‡∂∏‡∑ö‡∂Ω‡∑ä:</label><input type="email" id="email" required>
        <label>‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä:</label><textarea id="message" rows="4" required></textarea>
        <button type="submit">‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</button>
    </form>
    <p id="feedbackMsg" style="color:green; font-weight:bold;"></p>
</section>

<!-- CONTACT -->
<section id="contact">
    <h2>üìû ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∑ì‡∂∏</h2>
    <p>üìû 070 422 6267</p>
    <p>‚úâÔ∏è support@writeease.lk</p>
</section>

<footer>
    <p>¬© 2025 ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂∏‡∑í‡∂≠‡∑î‡∂ª‡∑è | ‡∑Ö‡∂∏‡∑î‡∂±‡∑ä ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑Ñ‡∑í‡∂≠‡∂ö‡∑è‡∂∏‡∑ì ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∑í‡∂ö ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫</p>
</footer>

<script>
// ===== Shared Data =====
const sinhalaLetters = ["‡∂Ö","‡∂Ü","‡∂á","‡∂à","‡∂â","‡∂ä","‡∂ã","‡∂å","‡∂ç","‡∂é","‡∂è","‡∂ê","‡∂ë","‡∂í","‡∂ì","‡∂î","‡∂ï","‡∂ñ","‡∂ö","‡∂õ","‡∂ú","‡∂ù","‡∂û","‡∂ü","‡∂†","‡∂°","‡∂¢","‡∂£","‡∂§","‡∂•","‡∂ß","‡∂®","‡∂©","‡∂™","‡∂´","‡∂¨","‡∂≠","‡∂Æ","‡∂Ø","‡∂∞","‡∂±","‡∂≥","‡∂¥","‡∂µ","‡∂∂","‡∂∑","‡∂∏","‡∂π","‡∂∫","‡∂ª","‡∂Ω","‡∑Ä","‡∑Å","‡∑Ç","‡∑É","‡∑Ñ","‡∑Ö","‡∑Ü"];

// ===== Activities: Find the Letter =====
let targetLetter = document.getElementById("targetLetter");
let activityMsg = document.getElementById("activityMsg");
const lettersGrid = document.getElementById("lettersGrid");

let findCorrect = 0, findTotal = 0;
function updateFindStats() {
  document.getElementById("findScore").innerText = findCorrect;
  document.getElementById("findTotal").innerText = findTotal;
  const acc = findTotal ? ((findCorrect/findTotal)*100).toFixed(1) : 0;
  document.getElementById("findAccuracy").innerText = acc + "%";
}
function newTarget() {
  targetLetter.textContent = sinhalaLetters[Math.floor(Math.random()*sinhalaLetters.length)];
  activityMsg.textContent = "";
}
sinhalaLetters.forEach(l=>{
  const div = document.createElement("div");
  div.className="letter";
  div.textContent=l;
  div.onclick=()=>{
    findTotal++;
    if(div.textContent===targetLetter.textContent){
      findCorrect++; activityMsg.textContent="‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í! üëè ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í.";
      document.getElementById("successSound")?.play();
      newTarget();
    } else {
      activityMsg.textContent="‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±!";
    }
    updateFindStats();
  };
  lettersGrid.appendChild(div);
});
newTarget(); updateFindStats();

// ===== Tracing Game (mask-based coverage for true tracing) =====
const traceCanvas = document.getElementById("traceCanvas");
const ctx = traceCanvas.getContext("2d");

// Offscreen mask canvas to validate strokes over the letter outline
const maskCanvas = document.createElement("canvas");
maskCanvas.width = traceCanvas.width;
maskCanvas.height = traceCanvas.height;
const mctx = maskCanvas.getContext("2d");

let currentLetterIndex = 0;
let isDrawing = false;
let lastX = 0, lastY = 0;
let maskData = null;
let maskTotal = 0;     // total pixels that belong to the letter outline (thick)
let coveredSet = new Set(); // visited pixel indices
let traceComplete = false;

function computeFontSize(letter){
  // Fit the letter width to ~75% of canvas width
  let size = 160; // start big
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  while(size > 30){
    ctx.font = `${size}px Noto Sans Sinhala`;
    const w = ctx.measureText(letter).width;
    if(w <= traceCanvas.width * 0.78) break;
    size -= 4;
  }
  return size;
}

function buildMask(letter){
  // Draw thick stroke of the letter on the offscreen canvas (as a mask)
  mctx.clearRect(0,0,maskCanvas.width,maskCanvas.height);
  const size = computeFontSize(letter);
  mctx.font = `${size}px Noto Sans Sinhala`;
  mctx.textAlign = "center";
  mctx.textBaseline = "middle";
  mctx.lineJoin = "round";
  mctx.lineCap = "round";
  mctx.lineWidth = 18;        // thick outline mask to allow some tolerance
  mctx.strokeStyle = "#000";
  mctx.strokeText(letter, maskCanvas.width/2, maskCanvas.height/2);

  // Cache mask pixel data + count
  const img = mctx.getImageData(0,0,maskCanvas.width,maskCanvas.height);
  maskData = img.data;
  maskTotal = 0;
  for(let y=0;y<maskCanvas.height;y++){
    for(let x=0;x<maskCanvas.width;x++){
      const a = maskData[(y*maskCanvas.width + x)*4 + 3];
      if(a>0) maskTotal++;
    }
  }
  coveredSet.clear();
  traceComplete = false;
  updateTraceAccuracy(0);
}

function drawLetterOutline(letter){
  // Faint visible outline on main canvas (always behind strokes)
  ctx.clearRect(0,0,traceCanvas.width,traceCanvas.height);
  const size = computeFontSize(letter);
  ctx.font = `${size}px Noto Sans Sinhala`;
  ctx.textAlign="center"; ctx.textBaseline="middle";
  ctx.lineJoin="round"; ctx.lineCap="round";
  ctx.lineWidth = 3;
  ctx.strokeStyle = "#cccccc";
  ctx.strokeText(letter, traceCanvas.width/2, traceCanvas.height/2);
}

function updateTraceAccuracy(pct){
  document.getElementById("traceAccuracy").innerText = Math.min(100, Math.round(pct));
}

function startTracing(){
  const letter = sinhalaLetters[currentLetterIndex];
  drawLetterOutline(letter);
  buildMask(letter);
  document.getElementById("traceMotivation").textContent = "";
}

function clearTracing(){
  const letter = sinhalaLetters[currentLetterIndex];
  drawLetterOutline(letter);
  buildMask(letter);
  document.getElementById("traceMotivation").textContent = "";
}

function nextTracing(){
  currentLetterIndex = (currentLetterIndex + 1) % sinhalaLetters.length;
  startTracing();
}

function coverAlongLine(x0,y0,x1,y1){
  // sample pixels along the line and mark coverage if they overlap mask
  const dx = x1 - x0, dy = y1 - y0;
  const steps = Math.max(Math.abs(dx), Math.abs(dy));
  if(steps === 0) return 0;
  let newlyCovered = 0;
  const sx = dx/steps, sy = dy/steps;
  for(let i=0;i<=steps;i++){
    const x = Math.round(x0 + sx * i);
    const y = Math.round(y0 + sy * i);
    if(x<0||y<0||x>=maskCanvas.width||y>=maskCanvas.height) continue;
    const idx = y*maskCanvas.width + x;
    const a = maskData[idx*4 + 3];
    if(a>0 && !coveredSet.has(idx)){
      coveredSet.add(idx);
      newlyCovered++;
    }
  }
  return newlyCovered;
}

traceCanvas.addEventListener("mousedown",(e)=>{
  isDrawing = true;
  lastX = e.offsetX; lastY = e.offsetY;
  ctx.beginPath();
  ctx.moveTo(lastX,lastY);
});
traceCanvas.addEventListener("mousemove",(e)=>{
  if(!isDrawing || !maskData) return;
  const x = e.offsetX, y = e.offsetY;
  // draw stroke
  ctx.strokeStyle = "#0096c7";
  ctx.lineWidth = 6;
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  ctx.lineTo(x,y);
  ctx.stroke();

  // update coverage
  const newly = coverAlongLine(lastX,lastY,x,y);
  const pct = (coveredSet.size / maskTotal) * 100;
  updateTraceAccuracy(pct);
  if(!traceComplete && pct >= 80){
    traceComplete = true;
    document.getElementById("traceMotivation").textContent = "‡∂â‡∂≠‡∑è ‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í! üëè 80% ‡∂â‡∂ö‡∑ä‡∂∏‡∑Ä‡∑è ‡∂á‡∂≠.";
    document.getElementById("successSound")?.play();
  }
  lastX = x; lastY = y;
});
["mouseup","mouseout"].forEach(ev=>{
  traceCanvas.addEventListener(ev,()=>{
    isDrawing = false;
    ctx.closePath();
  });
});

// ===== Memory Game =====
function initMemoryGame() {
  const game = document.getElementById("memoryGame");
  game.innerHTML = "";
  const pairs = ["‡∂Ö", "‡∂Ü", "‡∂ö", "‡∂ú", "‡∂≠", "‡∂Ø"];
  let cards = [...pairs, ...pairs].sort(() => 0.5 - Math.random());
  let flipped = [], matched = 0, attempts = 0;
  cards.forEach(letter => {
    const div = document.createElement("div");
    div.className = "tile";
    div.style.width = "60px"; div.style.textAlign="center";
    div.dataset.letter = letter;
    div.textContent = "‚ùì";
    div.onclick = function() {
      if (flipped.length < 2 && !div.classList.contains("flipped")) {
        div.classList.add("flipped");
        div.textContent = letter;
        flipped.push(div);
        if (flipped.length === 2) {
          attempts++;
          if (flipped[0].dataset.letter === flipped[1].dataset.letter) {
            matched++;
            document.getElementById("memoryMotivation").innerText = "‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í! üëè";
            flipped = [];
          } else {
            setTimeout(() => {
              flipped.forEach(c => { c.classList.remove("flipped"); c.textContent = "‚ùì"; });
              flipped = [];
            }, 700);
            document.getElementById("memoryMotivation").innerText = "‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±!";
          }
          let acc = Math.round((matched / attempts) * 100);
          if (isNaN(acc)) acc = 0;
          document.getElementById("memoryAccuracy").innerText = acc;
        }
      }
    };
    game.appendChild(div);
  });
}

// ===== Vowel / Consonant Sort =====
const vowels = new Set(["‡∂Ö","‡∂Ü","‡∂á","‡∂à","‡∂â","‡∂ä","‡∂ã","‡∂å","‡∂ç","‡∂é","‡∂è","‡∂ê","‡∂ë","‡∂í","‡∂ì","‡∂î","‡∂ï","‡∂ñ"]);
let vcCorrect=0, vcTotal=0;
function updateVCStats(){
  const acc = vcTotal? ((vcCorrect/vcTotal)*100).toFixed(1) : 0;
  document.getElementById("vcCorrect").innerText = vcCorrect;
  document.getElementById("vcTotal").innerText = vcTotal;
  document.getElementById("vcAcc").innerText = acc + "%";
}
function newVCRound(){
  const holder = document.getElementById("vcGrid");
  holder.innerHTML = "";
  document.getElementById("vcMsg").textContent = "";
  const picks = [];
  while(picks.length<12){
    const l = sinhalaLetters[Math.floor(Math.random()*sinhalaLetters.length)];
    picks.push(l);
  }
  picks.forEach(l=>{
    const d = document.createElement("div");
    d.className="tile";
    d.textContent=l;
    d.onclick = ()=>{
      vcTotal++;
      if(vowels.has(l)){
        vcCorrect++; d.classList.add("correct"); d.style.pointerEvents="none";
        document.getElementById("vcMsg").textContent="‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í! üëè";
        document.getElementById("successSound")?.play();
      } else {
        d.classList.add("wrong"); d.style.pointerEvents="none";
        document.getElementById("vcMsg").textContent="‡∂∏‡∑ô‡∂∏ ‡∂Ö‡∂ö‡∑î‡∂ª ‡∑Ä‡∑ä‚Äç‡∂∫‡∂Ç‡∂¢‡∂±‡∂∫‡∂ö‡∑ä!";
      }
      updateVCStats();
    };
    holder.appendChild(d);
  });
}
function revealVC(){
  const nodes = document.querySelectorAll("#vcGrid .tile");
  nodes.forEach(n=>{
    if(vowels.has(n.textContent)) n.classList.add("correct");
    else n.classList.add("wrong");
    n.style.pointerEvents="none";
  });
}

// ===== Speed Tap =====
let tapTime = 20, tapTimerId = null, tapRunning = false;
let tapScore=0, tapAttempts=0, currentTapTarget="";
function randomChoices(n=12){
  const arr=[];
  for(let i=0;i<n;i++){
    arr.push(sinhalaLetters[Math.floor(Math.random()*sinhalaLetters.length)]);
  }
  return arr;
}
function renderTapRound(){
  currentTapTarget = sinhalaLetters[Math.floor(Math.random()*sinhalaLetters.length)];
  document.getElementById("tapTarget").textContent = currentTapTarget;
  const grid = document.getElementById("tapGrid");
  grid.innerHTML="";
  const choices = randomChoices(12);
  // ensure at least one target present
  if(!choices.includes(currentTapTarget)){
    choices[Math.floor(Math.random()*choices.length)] = currentTapTarget;
  }
  choices.forEach(ch=>{
    const t = document.createElement("div");
    t.className="tile";
    t.textContent=ch;
    t.onclick=()=>{
      if(!tapRunning) return;
      tapAttempts++;
      if(ch===currentTapTarget){
        tapScore++; document.getElementById("tapMsg").textContent="‡∑É‡∑î‡∂¥‡∑í‡∂ª‡∑í! ‚úÖ";
        document.getElementById("successSound")?.play();
      } else {
        document.getElementById("tapMsg").textContent="‡∂Ö‡∑Ä‡∑è‡∑É‡∂±‡∑è‡∑Ä‡∂ö‡∂ß üòÖ";
      }
      updateTapStats();
      renderTapRound();
    };
    grid.appendChild(t);
  });
}
function updateTapStats(){
  document.getElementById("tapScore").innerText = tapScore;
  document.getElementById("tapAttempts").innerText = tapAttempts;
  const acc = tapAttempts? ((tapScore/tapAttempts)*100).toFixed(1) : 0;
  document.getElementById("tapAcc").innerText = acc + "%";
}
function startTap(){
  if(tapRunning) return;
  tapRunning = true; tapTime = 20; tapScore=0; tapAttempts=0;
  document.getElementById("tapMsg").textContent="";
  updateTapStats();
  renderTapRound();
  document.getElementById("tapTimer").innerText = tapTime;
  tapTimerId = setInterval(()=>{
    tapTime--;
    document.getElementById("tapTimer").innerText = tapTime;
    if(tapTime<=0){
      clearInterval(tapTimerId); tapRunning=false;
      document.getElementById("tapMsg").textContent = "‡∂ö‡∑è‡∂Ω‡∂∫ ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä! üèÅ";
    }
  },1000);
}

// ===== Feedback form =====
document.getElementById("feedbackForm").addEventListener("submit", function(e) {
  e.preventDefault();
  document.getElementById("feedbackMsg").innerText = "‚úÖ ‡∂î‡∂∂‡∑ö ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂Ö‡∂¥‡∂ß ‡∂Ω‡∑ê‡∂∂‡∑ì ‡∂á‡∂≠!";
  this.reset();
});

// ===== On Load =====
window.onload = function(){
  // Tracing initial
  startTracing();
  // Memory default grid (empty until click start)
  document.getElementById("memoryGame").innerHTML = "";
  // Vowel/Consonant initial
  newVCRound();
};
</script>
</body>
</html>
